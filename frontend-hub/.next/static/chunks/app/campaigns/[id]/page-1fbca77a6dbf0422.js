(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[313],{2003:function(e,s,a){Promise.resolve().then(a.bind(a,5417))},8867:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},8997:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},5863:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},2718:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]])},8919:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},5417:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return y}});var t=a(7437),l=a(2265),i=a(9376),r=a(9653),n=a(5863),c=a(2718),d=a(525),x=a(8997),o=a(8919),m=a(3774),h=a(8867),u=a(7648),g=a(3145),j=a(2381),N=a(9174),b=a(9820),p=a(7204),v=a(1713),f=a(6596);function y(){var e;let{data:s,isLoading:a,error:y}=(e=(0,i.useParams)().id,(0,v.a)({queryKey:["campaign",e],queryFn:async()=>{if(!e||"undefined"===e)throw Error("Campaign ID is required");return await f.M.getCampaignById(e)},enabled:!!e&&"undefined"!==e,staleTime:3e5,refetchOnWindowFocus:!1,retry:(e,s)=>{var a;return(null===(a=s.message)||void 0===a||!a.includes("404"))&&e<3}})),[w,k]=(0,l.useState)(!1),[C,Z]=(0,l.useState)(null),[S,z]=(0,l.useState)(""),[D,L]=(0,l.useState)("story"),F=async()=>{if(navigator.share&&s)try{await navigator.share({title:s.title,text:s.description,url:window.location.href})}catch(e){console.log("Erreur lors du partage:",e)}else navigator.clipboard.writeText(window.location.href)},A=e=>{console.log("Donation de ".concat(e,"€ pour la campagne ").concat(null==s?void 0:s.id))};if(a)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-64 bg-gray-300"}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-300 rounded w-2/3 mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-300 rounded w-full mb-6"}),(0,t.jsx)("div",{className:"h-64 bg-gray-300 rounded"})]}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsx)("div",{className:"h-64 bg-gray-300 rounded"})})]})})]})});if(y)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Campagne non trouv\xe9e"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"La campagne que vous recherchez n'existe pas ou n'est plus disponible."}),(0,t.jsx)(u.default,{href:"/campaigns",children:(0,t.jsx)(j.z,{children:"Retour aux campagnes"})})]})});if(!s)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(n.Z,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-gray-400"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Chargement des donn\xe9es..."})]})});let E=Number(s.raised||0)/Number(s.goal)*100,I=[{id:"story",label:"Histoire",icon:c.Z},{id:"progress",label:"Progression",icon:d.Z}];return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)("div",{className:"bg-white border-b",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("div",{className:"flex items-center gap-4",children:(0,t.jsx)(u.default,{href:"/campaigns",className:"text-gray-600 hover:text-gray-900",children:"← Retour aux campagnes"})}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(j.z,{variant:"outline",size:"sm",onClick:()=>{k(!w)},children:(0,t.jsx)(x.Z,{className:"w-4 h-4 ".concat(w?"fill-current text-red-500":"")})}),(0,t.jsx)(j.z,{variant:"outline",size:"sm",onClick:F,children:(0,t.jsx)(o.Z,{className:"w-4 h-4"})})]})]})})}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(b.Zb,{className:"overflow-hidden",children:(0,t.jsxs)("div",{className:"aspect-video bg-gradient-to-r from-blue-600 to-purple-600 relative",children:[s.coverImage?(0,t.jsx)(g.default,{src:s.coverImage,alt:s.title,fill:!0,className:"object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center text-white",children:(0,t.jsx)(x.Z,{className:"w-16 h-16"})}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-30"}),(0,t.jsxs)("div",{className:"absolute bottom-4 left-4 right-4",children:[(0,t.jsx)(N.C,{className:"mb-2",children:"ACTIVE"===s.status?"Campagne active":s.status}),(0,t.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:s.title}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-white/90",children:[(0,t.jsx)(m.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:["Campagne #",s.id]})]})]})]})}),(0,t.jsxs)(b.Zb,{className:"p-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:[Number(s.raised||0).toLocaleString(),"€"]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["collect\xe9s sur ",Number(s.goal).toLocaleString(),"€"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:s.donationsCount||0}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"donateurs"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:Math.max(0,Math.ceil((new Date(s.endDate).getTime()-new Date().getTime())/864e5))}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"jours restants"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsxs)("span",{children:[E.toFixed(1),"% de l'objectif"]}),(0,t.jsxs)("span",{children:[(Number(s.goal)-Number(s.raised||0)).toLocaleString(),"€ restants"]})]}),(0,t.jsx)(p.E,{value:E,className:"h-3"})]})]}),(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg",children:[(0,t.jsx)("nav",{className:"flex border-b border-gray-200",children:I.map(e=>{let s=e.icon;return(0,t.jsxs)("button",{onClick:()=>L(e.id),className:"flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ".concat(D===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:[(0,t.jsx)(s,{className:"w-4 h-4"}),e.label]},e.id)})}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:["story"===D&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Description du projet"}),(0,t.jsx)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:s.description})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"Informations"}),(0,t.jsxs)("div",{className:"space-y-2 text-blue-800 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"D\xe9but:"}),(0,t.jsx)("span",{children:new Date(s.startDate).toLocaleDateString("fr-FR")})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Fin:"}),(0,t.jsx)("span",{children:new Date(s.endDate).toLocaleDateString("fr-FR")})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Devise:"}),(0,t.jsx)("span",{children:s.currency})]})]})]}),(0,t.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"Statut"}),(0,t.jsxs)("div",{className:"space-y-2 text-green-800 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"\xc9tat:"}),(0,t.jsx)(N.C,{variant:"ACTIVE"===s.status?"default":"secondary",children:s.status})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Active:"}),(0,t.jsx)("span",{children:s.isActive?"Oui":"Non"})]})]})]})]})]}),"progress"===D&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Progression de la campagne"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-green-100 to-blue-100 p-6 rounded-lg",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Statistiques d\xe9taill\xe9es"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[E.toFixed(1),"%"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Progression"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[Number(s.raised||0).toLocaleString(),"€"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Collect\xe9"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[Number(s.goal).toLocaleString(),"€"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Objectif"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[(Number(s.goal)-Number(s.raised||0)).toLocaleString(),"€"]}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Restant"})]})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Barre de progression d\xe9taill\xe9e"}),(0,t.jsx)(p.E,{value:E,className:"h-4 mb-2"}),(0,t.jsxs)("div",{className:"flex justify-between text-sm text-gray-600",children:[(0,t.jsx)("span",{children:"0€"}),(0,t.jsxs)("span",{className:"font-medium",children:[Number(s.raised||0).toLocaleString(),"€ / ",Number(s.goal).toLocaleString(),"€"]}),(0,t.jsxs)("span",{children:[Number(s.goal).toLocaleString(),"€"]})]})]})]})]})]},D)})]})]}),(0,t.jsx)("div",{className:"space-y-6",children:(0,t.jsxs)(b.Zb,{className:"p-6 bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200 sticky top-4",children:[(0,t.jsx)("h3",{className:"text-xl font-bold mb-4 text-center",children:"Soutenir ce projet"}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[25,50,100,250].map(e=>(0,t.jsxs)(j.z,{variant:C===e?"secondary":"outline",size:"sm",onClick:()=>{Z(e),z("")},children:[e,"€"]},e))}),(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)("input",{type:"number",placeholder:"Autre montant",value:S,onChange:e=>{z(e.target.value),Z(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}),(0,t.jsxs)(j.z,{className:"w-full mb-4",size:"lg",onClick:()=>{let e=C||parseInt(S);e&&A(e)},disabled:!C&&!S,children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Faire un don"]}),(0,t.jsx)("div",{className:"border-t pt-4",children:(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Cr\xe9\xe9e le:"}),(0,t.jsx)("span",{className:"font-medium",children:new Date(s.createdAt).toLocaleDateString("fr-FR")})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Mise \xe0 jour:"}),(0,t.jsx)("span",{className:"font-medium",children:new Date(s.updatedAt).toLocaleDateString("fr-FR")})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"ID Campagne:"}),(0,t.jsx)("span",{className:"font-mono text-xs",children:s.id.slice(-8)})]})]})}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Partagez cette campagne"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(j.z,{variant:"outline",size:"sm",className:"flex-1",children:"Facebook"}),(0,t.jsx)(j.z,{variant:"outline",size:"sm",className:"flex-1",children:"Twitter"}),(0,t.jsx)(j.z,{variant:"outline",size:"sm",onClick:F,children:(0,t.jsx)(h.Z,{className:"w-4 h-4"})})]})]})]})})]})})]})}}},function(e){e.O(0,[543,828,815,950,713,616,971,117,744],function(){return e(e.s=2003)}),_N_E=e.O()}]);