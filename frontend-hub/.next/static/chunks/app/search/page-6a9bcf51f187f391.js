(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[797],{515:function(e,s,a){Promise.resolve().then(a.bind(a,6314))},6314:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return E}});var t=a(7437),i=a(2265),r=a(9376),l=a(9653),n=a(6595),c=a(1723),o=a(525),d=a(1281),m=a(7586),x=a(1790),u=a(2735),h=a(3247),f=a(2381),p=a(9174),g=a(9820),v=a(3397),j=a(89),y=a(7410),N=a(2535);let b=[{id:"1",tenantId:"kehilat-paris",name:"Kehilat Paris",description:"Centre communautaire juif parisien proposant des services religieux et \xe9ducatifs",logo:"https://images.unsplash.com/photo-1590650516494-0c8e4a4dd67e?w=150&h=150&fit=crop",category:"Religion",location:"Paris 17\xe8me",isPublic:!0,isVerified:!0,totalCampaigns:5,activeCampaigns:2,createdAt:"2023-01-15T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z"},{id:"2",tenantId:"aide-enfance",name:"Aide \xe0 l'Enfance",description:"Association d\xe9di\xe9e \xe0 l'aide aux enfants en difficult\xe9",logo:"https://images.unsplash.com/photo-1544027993-37dbfe43562a?w=150&h=150&fit=crop",category:"Enfance",location:"Lyon",isPublic:!0,isVerified:!0,totalCampaigns:8,activeCampaigns:3,createdAt:"2022-06-20T10:00:00Z",updatedAt:"2024-01-10T10:00:00Z"}],w=[{id:"1",tenantId:"kehilat-paris",userId:"user1",title:"R\xe9novation de la salle communautaire",description:"Collecte pour moderniser notre salle communautaire",goal:5e4,currency:"EUR",startDate:"2024-01-01T00:00:00Z",endDate:"2024-06-30T23:59:59Z",status:"ACTIVE",isActive:!0,createdAt:"2024-01-01T10:00:00Z",updatedAt:"2024-01-15T10:00:00Z",_count:{donations:23}},{id:"2",tenantId:"aide-enfance",userId:"user2",title:"Vacances pour tous",description:"Organiser des vacances pour les enfants d\xe9favoris\xe9s",goal:3e4,currency:"EUR",startDate:"2024-03-01T00:00:00Z",endDate:"2024-07-31T23:59:59Z",status:"ACTIVE",isActive:!0,createdAt:"2024-03-01T10:00:00Z",updatedAt:"2024-03-15T10:00:00Z",_count:{donations:45}}];function C(){let e=(0,r.useSearchParams)(),[s,a]=(0,i.useState)({query:"",filters:{type:"all"},view:"grid",sort:"relevance"}),C=(0,i.useCallback)(e=>{a(s=>({...s,...e}))},[]),[E,Z]=(0,i.useState)({associations:[],campaigns:[],total:0}),[A,T]=(0,i.useState)(!1),[k,L]=(0,i.useState)(!1),D=(0,i.useCallback)(async()=>{T(!0);try{await new Promise(e=>setTimeout(e,800));let e=b,a=w;s.query&&(e=b.filter(e=>e.name.toLowerCase().includes(s.query.toLowerCase())||e.description.toLowerCase().includes(s.query.toLowerCase())||e.category.toLowerCase().includes(s.query.toLowerCase())),a=w.filter(e=>e.title.toLowerCase().includes(s.query.toLowerCase())||e.description.toLowerCase().includes(s.query.toLowerCase()))),"associations"===s.filters.type?a=[]:"campaigns"===s.filters.type&&(e=[]),s.filters.category&&(e=e.filter(e=>e.category===s.filters.category)),s.filters.location&&(e=e.filter(e=>e.location.toLowerCase().includes(s.filters.location.toLowerCase()))),"verified"===s.filters.verification&&(e=e.filter(e=>e.isVerified)),Z({associations:e,campaigns:a,total:e.length+a.length})}catch(e){console.error("Erreur lors de la recherche:",e)}finally{T(!1)}},[s]);(0,i.useEffect)(()=>{C({query:e.get("q")||"",filters:{category:e.get("category")||"",location:e.get("location")||""}})},[e,C]),(0,i.useEffect)(()=>{(s.query||Object.values(s.filters).some(e=>e))&&D()},[s.query,s.filters,D]);let P=e=>{C({filters:{...s.filters,...e}})},R=[{value:"relevance",label:"Pertinence",icon:n.Z},{value:"date",label:"Plus r\xe9cent",icon:c.Z},{value:"popularity",label:"Popularit\xe9",icon:o.Z},{value:"alphabetical",label:"Alphab\xe9tique",icon:d.Z}];return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,t.jsx)(v.O,{items:[{label:"Recherche"}],className:"mb-6"}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Recherche"}),(0,t.jsx)("div",{className:"max-w-3xl",children:(0,t.jsx)(j.E,{onSearch:e=>{C({query:e})},placeholder:"Rechercher associations, campagnes..."})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-1",children:(0,t.jsxs)(g.Zb,{className:"p-6 sticky top-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"Filtres"}),(0,t.jsx)(f.z,{variant:"ghost",size:"sm",onClick:()=>L(!k),className:"lg:hidden",children:(0,t.jsx)(m.Z,{className:"w-4 h-4"})})]}),(0,t.jsxs)("div",{className:"space-y-6 ".concat(k?"block":"hidden lg:block"),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium mb-3",children:"Type"}),(0,t.jsx)("div",{className:"space-y-2",children:[{value:"all",label:"Tout"},{value:"associations",label:"Associations"},{value:"campaigns",label:"Campagnes"}].map(e=>(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"radio",name:"type",value:e.value,checked:s.filters.type===e.value,onChange:e=>P({type:e.target.value}),className:"text-blue-600"}),(0,t.jsx)("span",{className:"text-sm",children:e.label})]},e.value))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium mb-3",children:"Cat\xe9gorie"}),(0,t.jsxs)("select",{value:s.filters.category||"",onChange:e=>P({category:e.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm",children:[(0,t.jsx)("option",{value:"",children:"Toutes les cat\xe9gories"}),(0,t.jsx)("option",{value:"Religion",children:"Religion"}),(0,t.jsx)("option",{value:"Enfance",children:"Enfance"}),(0,t.jsx)("option",{value:"\xc9ducation",children:"\xc9ducation"}),(0,t.jsx)("option",{value:"Sant\xe9",children:"Sant\xe9"}),(0,t.jsx)("option",{value:"Environnement",children:"Environnement"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium mb-3",children:"Localisation"}),(0,t.jsx)("input",{type:"text",placeholder:"Ville, r\xe9gion...",value:s.filters.location||"",onChange:e=>P({location:e.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-medium mb-3",children:"V\xe9rification"}),(0,t.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:"verified"===s.filters.verification,onChange:e=>P({verification:e.target.checked?"verified":void 0}),className:"text-blue-600"}),(0,t.jsx)("span",{className:"text-sm",children:"Associations v\xe9rifi\xe9es uniquement"})]})]})]})]})}),(0,t.jsxs)("div",{className:"lg:col-span-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{children:A?(0,t.jsx)("div",{className:"h-6 w-32 bg-gray-200 animate-pulse rounded"}):(0,t.jsxs)("h2",{className:"text-xl font-semibold",children:[E.total," r\xe9sultat",E.total>1?"s":"",s.query&&' pour "'.concat(s.query,'"')]})}),E.total>0&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(p.C,{variant:"outline",children:[E.associations.length," associations"]}),(0,t.jsxs)(p.C,{variant:"outline",children:[E.campaigns.length," campagnes"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("select",{value:s.sort,onChange:e=>C({sort:e.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md text-sm",children:R.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,t.jsxs)("div",{className:"flex border border-gray-300 rounded-md",children:[(0,t.jsx)(f.z,{variant:"grid"===s.view?"primary":"ghost",size:"sm",onClick:()=>C({view:"grid"}),className:"rounded-r-none",children:(0,t.jsx)(m.Z,{className:"w-4 h-4"})}),(0,t.jsx)(f.z,{variant:"list"===s.view?"primary":"ghost",size:"sm",onClick:()=>C({view:"list"}),className:"rounded-l-none",children:(0,t.jsx)(m.Z,{className:"w-4 h-4"})})]}),(0,t.jsxs)(f.z,{variant:"outline",size:"sm",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Sauvegarder"]}),(0,t.jsxs)(f.z,{variant:"outline",size:"sm",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Exporter"]})]})]}),A?(0,t.jsx)("div",{className:"space-y-6",children:[1,2,3].map(e=>(0,t.jsx)(g.Zb,{className:"p-6 animate-pulse",children:(0,t.jsxs)("div",{className:"flex space-x-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-300 rounded"}),(0,t.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),(0,t.jsx)("div",{className:"h-3 bg-gray-300 rounded w-1/2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-300 rounded w-2/3"})]})]})},e))}):0===E.total?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)(h.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aucun r\xe9sultat trouv\xe9"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"Essayez de modifier vos crit\xe8res de recherche ou vos filtres."}),(0,t.jsx)(f.z,{variant:"outline",onClick:()=>C({query:"",filters:{type:"all"}}),children:"Effacer les filtres"})]}):(0,t.jsxs)("div",{className:"space-y-6 ".concat("grid"===s.view?"grid grid-cols-1 md:grid-cols-2 gap-6":""),children:[E.associations.map(e=>(0,t.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,t.jsx)(y.p,{association:e})},e.id)),E.campaigns.map(e=>(0,t.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:(0,t.jsx)(N.p,{campaign:e})},e.id))]})]})]})]})})}function E(){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)("div",{children:"Chargement..."}),children:(0,t.jsx)(C,{})})}},7410:function(e,s,a){"use strict";a.d(s,{p:function(){return h}});var t=a(7437),i=a(9653),r=a(44),l=a(5302),n=a(3774),c=a(6858),o=a(9820),d=a(9174),m=a(2381),x=a(3448),u=a(3145);function h(e){let{association:s,index:a=0,onClick:h}=e,f=()=>{null==h||h(s)};return(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1*a},viewport:{once:!0},children:(0,t.jsxs)(o.Zb,{hover:!0,shadow:"soft",className:"h-full flex flex-col cursor-pointer",onClick:f,children:[(0,t.jsxs)("div",{className:"h-48 bg-gradient-to-br from-primary-100 to-secondary-100 relative overflow-hidden",children:[s.coverImage?(0,t.jsx)(u.default,{src:s.coverImage,alt:s.name,fill:!0,className:"object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(r.Z,{className:"w-16 h-16 text-primary-300"})}),(0,t.jsxs)("div",{className:"absolute top-4 left-4 flex gap-2",children:[(0,t.jsx)(d.C,{variant:"accent",children:s.category}),s.isVerified&&(0,t.jsxs)(d.C,{variant:"verified",className:"flex items-center gap-1",children:[(0,t.jsx)(l.Z,{className:"w-3 h-3"}),"V\xe9rifi\xe9e"]})]})]}),(0,t.jsx)(o.aY,{className:"flex-1 p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h3",{className:"text-xl font-semibold text-gray-900 mb-2 flex items-center",children:[s.name,s.isVerified&&(0,t.jsx)(l.Z,{className:"ml-2 w-5 h-5 text-accent-500"})]}),(0,t.jsx)("p",{className:"text-gray-600 leading-relaxed",children:(0,x.aF)(s.description,120)})]}),(0,t.jsxs)("div",{className:"flex items-center text-gray-500 text-sm",children:[(0,t.jsx)(n.Z,{className:"w-4 h-4 mr-2"}),s.location]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-primary-600",children:s.activeCampaigns}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Campagne",s.activeCampaigns>1?"s":""," active",s.activeCampaigns>1?"s":""]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-secondary-600",children:s.totalCampaigns}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Total campagnes"})]})]})]})}),(0,t.jsx)(o.eW,{className:"p-6 pt-0",children:(0,t.jsxs)(m.z,{variant:"outline",className:"w-full group",onClick:e=>{e.stopPropagation(),f()},children:["D\xe9couvrir",(0,t.jsx)(c.Z,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})})]})})}},2535:function(e,s,a){"use strict";a.d(s,{p:function(){return p}});var t=a(7437),i=a(9653),r=a(5805),l=a(1047),n=a(8896),c=a(6858),o=a(9820),d=a(9174),m=a(2381),x=a(7204),u=a(3448);let h={DRAFT:"secondary",ACTIVE:"success",PAUSED:"warning",COMPLETED:"accent",CANCELLED:"destructive"},f={DRAFT:"Brouillon",ACTIVE:"Active",PAUSED:"En pause",COMPLETED:"Termin\xe9e",CANCELLED:"Annul\xe9e"};function p(e){var s;let{campaign:a,index:p=0,onClick:g}=e,v=a.raised||0,j=a.donorCount||(null===(s=a._count)||void 0===s?void 0:s.donations)||0,y=(0,u.SB)(v,a.goal),N="ACTIVE"===a.status,b=new Date(a.endDate)<new Date,w=()=>{null==g||g(a)};return(0,t.jsx)(i.E.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1*p},viewport:{once:!0},children:(0,t.jsxs)(o.Zb,{hover:!0,shadow:"soft",className:"h-full flex flex-col cursor-pointer",onClick:w,children:[(0,t.jsxs)(o.Ol,{className:"pb-4",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsx)(d.C,{variant:h[a.status],children:f[a.status]}),a.tenant&&(0,t.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:a.tenant.name})]}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 leading-tight",children:a.title}),(0,t.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:(0,u.aF)(a.description,100)})]}),(0,t.jsxs)(o.aY,{className:"flex-1 space-y-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)(x.E,{value:v,max:a.goal,variant:"accent",showLabel:!0,label:"".concat(y.toFixed(0),"% collect\xe9")})}),(0,t.jsx)("div",{className:"flex justify-between items-center text-sm",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-2xl font-bold text-gray-900",children:(0,u.xG)(v,a.currency)}),(0,t.jsxs)("span",{className:"text-gray-500 ml-1",children:["/ ",(0,u.xG)(a.goal,a.currency)]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,t.jsx)(r.Z,{className:"w-4 h-4 mr-2"}),j," donateur",j>1?"s":""]}),(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,t.jsx)(l.Z,{className:"w-4 h-4 mr-2"}),b?"Expir\xe9e":"Fin ".concat((0,u.p6)(a.endDate))]})]}),(0,t.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,t.jsx)(n.Z,{className:"w-4 h-4 mr-2"}),"Objectif: ",(0,u.xG)(a.goal,a.currency)]})]}),(0,t.jsx)(o.eW,{className:"pt-0",children:N&&!b?(0,t.jsxs)(m.z,{variant:"primary",className:"w-full group",onClick:e=>{e.stopPropagation(),w()},children:["Faire un don",(0,t.jsx)(c.Z,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]}):(0,t.jsxs)(m.z,{variant:"outline",className:"w-full group",onClick:e=>{e.stopPropagation(),w()},children:["Voir d\xe9tails",(0,t.jsx)(c.Z,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})})]})})}},3397:function(e,s,a){"use strict";a.d(s,{O:function(){return c}});var t=a(7437),i=a(2265),r=a(9637),l=a(407),n=a(7648);function c(e){let{items:s,className:a="",showHome:c=!0,separator:o}=e,d=c?[{label:"Accueil",href:"/",icon:r.Z},...s]:s,m=(0,t.jsx)(l.Z,{className:"w-4 h-4 text-gray-400"});return(0,t.jsx)("nav",{"aria-label":"Breadcrumb",className:"flex items-center space-x-2 text-sm ".concat(a),children:d.map((e,s)=>{let a=s===d.length-1,r=e.icon;return(0,t.jsxs)(i.Fragment,{children:[s>0&&(o||m),(0,t.jsxs)("div",{className:"flex items-center",children:[r&&(0,t.jsx)(r,{className:"w-4 h-4 mr-1"}),e.href&&!a?(0,t.jsx)(n.default,{href:e.href,className:"text-gray-600 hover:text-gray-900 transition-colors",children:e.label}):(0,t.jsx)("span",{className:a?"text-gray-900 font-medium":"text-gray-600",children:e.label})]})]},s)})})}},9820:function(e,s,a){"use strict";a.d(s,{Ol:function(){return n},Zb:function(){return l},aY:function(){return c},eW:function(){return o}});var t=a(7437),i=a(2265),r=a(3448);let l=i.forwardRef((e,s)=>{let{className:a,hover:i=!1,shadow:l="soft",...n}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-xl border bg-card text-card-foreground overflow-hidden","soft"===l&&"shadow-soft","medium"===l&&"shadow-medium","large"===l&&"shadow-lg",i&&"hover-lift cursor-pointer",a),...n})});l.displayName="Card";let n=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...i})});n.displayName="CardHeader",i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...i})}).displayName="CardTitle",i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",a),...i})}).displayName="CardDescription";let c=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",a),...i})});c.displayName="CardContent";let o=i.forwardRef((e,s)=>{let{className:a,...i}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",a),...i})});o.displayName="CardFooter"},7204:function(e,s,a){"use strict";a.d(s,{E:function(){return l}});var t=a(7437),i=a(2265),r=a(3448);let l=i.forwardRef((e,s)=>{let{className:a,value:i=0,max:l=100,size:n="default",variant:c="default",showLabel:o=!1,label:d,...m}=e,x=Math.min(i/l*100,100);return(0,t.jsxs)("div",{className:"w-full",ref:s,...m,children:[o&&(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:d||"".concat(x.toFixed(0),"%")}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[i.toLocaleString()," / ",l.toLocaleString()]})]}),(0,t.jsx)("div",{className:(0,r.cn)("progress-bar",{sm:"h-2",default:"h-3",lg:"h-4"}[n],a),children:(0,t.jsx)("div",{className:(0,r.cn)("progress-fill rounded-full transition-all duration-700 ease-out",{default:"bg-gradient-to-r from-primary-500 to-primary-600",accent:"bg-gradient-to-r from-accent-500 to-accent-600",success:"bg-gradient-to-r from-green-500 to-green-600",warning:"bg-gradient-to-r from-orange-500 to-orange-600"}[c]),style:{width:"".concat(x,"%")}})})]})});l.displayName="Progress"}},function(e){e.O(0,[752,804,950,177,89,971,117,744],function(){return e(e.s=515)}),_N_E=e.O()}]);